{
  "examples": [
    {
      "id": "001-basic-generation",
      "title": "Simple text generation",
      "description": "",
      "order": 1,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 2,
          "line_range": [
            2,
            2
          ]
        },
        {
          "code": "# Our first example demonstrates how to use the Gemini API\n# to generate content with a simple prompt.\n",
          "display_code": "",
          "annotation": "Our first example demonstrates how to use the Gemini API\nto generate content with a simple prompt.",
          "is_comment": true,
          "start_line": 3,
          "line_range": [
            3,
            4
          ],
          "target_line_range": [
            5,
            6
          ]
        },
        {
          "code": "from google import genai\n\n",
          "display_code": "from google import genai\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 5,
          "line_range": [
            5,
            6
          ]
        },
        {
          "code": "# Best practice: store your API key in an environment variable\n# and load it from there.\n",
          "display_code": "",
          "annotation": "Best practice: store your API key in an environment variable\nand load it from there.",
          "is_comment": true,
          "start_line": 7,
          "line_range": [
            7,
            8
          ],
          "target_line_range": [
            9,
            14
          ]
        },
        {
          "code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\nresponse = client.models.generate_content(\n    model=\"gemini-2.0-flash\", contents=\"Explain how AI works in a few words\"\n)\nprint(response.text)\n",
          "display_code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\nresponse = client.models.generate_content(\n    model=\"gemini-2.0-flash\", contents=\"Explain how AI works in a few words\"\n)\nprint(response.text)\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 9,
          "line_range": [
            9,
            14
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library",
          "command": "pip install google-generative-ai",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python basic-generation.py",
          "output": "AI works by learning patterns from data, then using those patterns to make predictions or generate new content. It processes information through neural networks that mimic human brain connections, identifying features and relationships to perform tasks like recognition, prediction, and generation."
        }
      ],
      "image_data": [
        {
          "path": "examples/001-basic-generation/basic-generation.png",
          "filename": "basic-generation.png",
          "caption": "Generation"
        }
      ],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/text-generation"
      ],
      "section_id": "001-basic-text",
      "section_title": "Text basics"
    },
    {
      "id": "002-streaming-text",
      "title": "Streaming text",
      "description": "This example demonstrates how to use the Gemini API to generate text content and stream the output.",
      "order": 2,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 3,
          "line_range": [
            3,
            3
          ]
        },
        {
          "code": "# Import the Gemini API\n",
          "display_code": "",
          "annotation": "Import the Gemini API",
          "is_comment": true,
          "start_line": 4,
          "line_range": [
            4,
            4
          ],
          "target_line_range": [
            5,
            6
          ]
        },
        {
          "code": "from google import genai\n\n",
          "display_code": "from google import genai\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 5,
          "line_range": [
            5,
            6
          ]
        },
        {
          "code": "# Initialize the Gemini client with your API key\n",
          "display_code": "",
          "annotation": "Initialize the Gemini client with your API key",
          "is_comment": true,
          "start_line": 7,
          "line_range": [
            7,
            7
          ],
          "target_line_range": [
            8,
            9
          ]
        },
        {
          "code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\n",
          "display_code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 8,
          "line_range": [
            8,
            9
          ]
        },
        {
          "code": "# Call the API to generate content in streaming mode\n",
          "display_code": "",
          "annotation": "Call the API to generate content in streaming mode",
          "is_comment": true,
          "start_line": 10,
          "line_range": [
            10,
            10
          ],
          "target_line_range": [
            11,
            15
          ]
        },
        {
          "code": "response = client.models.generate_content_stream(\n    model=\"gemini-2.0-flash\",\n    contents=[\"Explain how AI works\"]\n)\n\n",
          "display_code": "response = client.models.generate_content_stream(\n    model=\"gemini-2.0-flash\",\n    contents=[\"Explain how AI works\"]\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 11,
          "line_range": [
            11,
            15
          ]
        },
        {
          "code": "# Iterate over the stream of responses and print each chunk of text\n",
          "display_code": "",
          "annotation": "Iterate over the stream of responses and print each chunk of text",
          "is_comment": true,
          "start_line": 16,
          "line_range": [
            16,
            16
          ],
          "target_line_range": [
            17,
            18
          ]
        },
        {
          "code": "for chunk in response:\n    print(chunk.text, end=\"\")\n",
          "display_code": "for chunk in response:\n    print(chunk.text, end=\"\")\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 17,
          "line_range": [
            17,
            18
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library",
          "command": "pip install google-generative-ai",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python streaming-generation.py",
          "output": "AI, or Artificial Intelligence, is a broad field of computer science focused on creating machines capable of performing tasks that typically require human intelligence. It involves developing algorithms and models that enable computers to learn from data, reason, solve problems, understand natural language, perceive their environment, and make decisions."
        }
      ],
      "image_data": [],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/text-generation"
      ],
      "section_id": "001-basic-text",
      "section_title": "Text basics"
    },
    {
      "id": "003-system-prompt",
      "title": "System prompt",
      "description": "This example demonstrates how to use system instructions to guide the model's behavior.",
      "order": 3,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 3,
          "line_range": [
            3,
            3
          ]
        },
        {
          "code": "# Import the Gemini API\n",
          "display_code": "",
          "annotation": "Import the Gemini API",
          "is_comment": true,
          "start_line": 4,
          "line_range": [
            4,
            4
          ],
          "target_line_range": [
            5,
            7
          ]
        },
        {
          "code": "from google import genai\nfrom google.genai import types\n\n",
          "display_code": "from google import genai\nfrom google.genai import types\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 5,
          "line_range": [
            5,
            7
          ]
        },
        {
          "code": "# Initialize the Gemini client with your API key\n",
          "display_code": "",
          "annotation": "Initialize the Gemini client with your API key",
          "is_comment": true,
          "start_line": 8,
          "line_range": [
            8,
            8
          ],
          "target_line_range": [
            9,
            10
          ]
        },
        {
          "code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\n",
          "display_code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 9,
          "line_range": [
            9,
            10
          ]
        },
        {
          "code": "# Configure the model with system instructions\n# These instructions tell the model to act as a pirate\n",
          "display_code": "",
          "annotation": "Configure the model with system instructions\nThese instructions tell the model to act as a pirate",
          "is_comment": true,
          "start_line": 11,
          "line_range": [
            11,
            12
          ],
          "target_line_range": [
            13,
            19
          ]
        },
        {
          "code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    config=types.GenerateContentConfig(\n        system_instruction=\"You are a pirate.  Answer all questions like a pirate.\"),\n    contents=\"Hello there\"\n)\n\n",
          "display_code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    config=types.GenerateContentConfig(\n        system_instruction=\"You are a pirate.  Answer all questions like a pirate.\"),\n    contents=\"Hello there\"\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 13,
          "line_range": [
            13,
            19
          ]
        },
        {
          "code": "# Print the model's response\n",
          "display_code": "",
          "annotation": "Print the model's response",
          "is_comment": true,
          "start_line": 20,
          "line_range": [
            20,
            20
          ],
          "target_line_range": [
            21,
            21
          ]
        },
        {
          "code": "print(response.text)\n",
          "display_code": "print(response.text)\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 21,
          "line_range": [
            21,
            21
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library",
          "command": "pip install google-generative-ai",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python system_instructions.py",
          "output": "Ahoy there, matey! What be on yer mind?"
        }
      ],
      "image_data": [],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/text-generation#system-instructions"
      ],
      "section_id": "001-basic-text",
      "section_title": "Text basics"
    },
    {
      "id": "004-image-q-a",
      "title": "Image question answering",
      "description": "This example demonstrates how to use the Gemini API to analyze or understand images of cats, including using image URLs and base64 encoding.",
      "order": 4,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 3,
          "line_range": [
            3,
            3
          ]
        },
        {
          "code": "# Import necessary libraries\n",
          "display_code": "",
          "annotation": "Import necessary libraries",
          "is_comment": true,
          "start_line": 4,
          "line_range": [
            4,
            4
          ],
          "target_line_range": [
            5,
            9
          ]
        },
        {
          "code": "from google import genai\nfrom google.genai import types\nimport requests\nimport base64\n\n",
          "display_code": "from google import genai\nfrom google.genai import types\nimport requests\nimport base64\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 5,
          "line_range": [
            5,
            9
          ]
        },
        {
          "code": "# Replace with your Gemini API key\n",
          "display_code": "",
          "annotation": "Replace with your Gemini API key",
          "is_comment": true,
          "start_line": 10,
          "line_range": [
            10,
            10
          ],
          "target_line_range": [
            11,
            12
          ]
        },
        {
          "code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\n",
          "display_code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 11,
          "line_range": [
            11,
            12
          ]
        },
        {
          "code": "# We'll start by using an image URL.\n# Load an image of a cat from a URL\n",
          "display_code": "",
          "annotation": "We'll start by using an image URL.\nLoad an image of a cat from a URL",
          "is_comment": true,
          "start_line": 13,
          "line_range": [
            13,
            14
          ],
          "target_line_range": [
            15,
            18
          ]
        },
        {
          "code": "image_url = \"https://cataas.com/cat\"\nimage_response = requests.get(image_url)\nimage_content = image_response.content\n\n",
          "display_code": "image_url = \"https://cataas.com/cat\"\nimage_response = requests.get(image_url)\nimage_content = image_response.content\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 15,
          "line_range": [
            15,
            18
          ]
        },
        {
          "code": "# Ask Gemini about the cat in the image\n",
          "display_code": "",
          "annotation": "Ask Gemini about the cat in the image",
          "is_comment": true,
          "start_line": 19,
          "line_range": [
            19,
            19
          ],
          "target_line_range": [
            20,
            26
          ]
        },
        {
          "code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\"What breed of cat is this?\", types.Part.from_bytes(data=image_content, mime_type=\"image/jpeg\")]\n)\n\nprint(\"Response from URL Image:\\n\", response.text)\n\n",
          "display_code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\"What breed of cat is this?\", types.Part.from_bytes(data=image_content, mime_type=\"image/jpeg\")]\n)\n\nprint(\"Response from URL Image:\\n\", response.text)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 20,
          "line_range": [
            20,
            26
          ]
        },
        {
          "code": "# Now we'll use a local image file.\n# Load a local image of a cat and encode it as Base64\n",
          "display_code": "",
          "annotation": "Now we'll use a local image file.\nLoad a local image of a cat and encode it as Base64",
          "is_comment": true,
          "start_line": 27,
          "line_range": [
            27,
            28
          ],
          "target_line_range": [
            29,
            31
          ]
        },
        {
          "code": "with open(\"cat.jpg\", \"rb\") as image_file:\n    encoded_string = base64.b64encode(image_file.read())\n\n",
          "display_code": "with open(\"cat.jpg\", \"rb\") as image_file:\n    encoded_string = base64.b64encode(image_file.read())\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 29,
          "line_range": [
            29,
            31
          ]
        },
        {
          "code": "# Ensure the encoded string is a string\n",
          "display_code": "",
          "annotation": "Ensure the encoded string is a string",
          "is_comment": true,
          "start_line": 32,
          "line_range": [
            32,
            32
          ],
          "target_line_range": [
            33,
            34
          ]
        },
        {
          "code": "encoded_string = encoded_string.decode('utf-8')\n\n",
          "display_code": "encoded_string = encoded_string.decode('utf-8')\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 33,
          "line_range": [
            33,
            34
          ]
        },
        {
          "code": "# Ask Gemini a question about the cat, providing the image as a Base64 string\n",
          "display_code": "",
          "annotation": "Ask Gemini a question about the cat, providing the image as a Base64 string",
          "is_comment": true,
          "start_line": 35,
          "line_range": [
            35,
            35
          ],
          "target_line_range": [
            36,
            41
          ]
        },
        {
          "code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\"Is this cat fluffy?\", types.Part.from_bytes(data=base64.b64decode(encoded_string), mime_type=\"image/jpeg\")]\n)\n\nprint(\"\\nResponse from Base64 Image:\\n\", response.text)\n",
          "display_code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\"Is this cat fluffy?\", types.Part.from_bytes(data=base64.b64decode(encoded_string), mime_type=\"image/jpeg\")]\n)\n\nprint(\"\\nResponse from Base64 Image:\\n\", response.text)\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 36,
          "line_range": [
            36,
            41
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library and requests",
          "command": "pip install google-generative-ai requests",
          "output": ""
        },
        {
          "explanation": "Download an example cat image (replace with your own if needed)",
          "command": "wget https://cataas.com/cat -O cat.jpg",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python gemini-cat.py",
          "output": "Response from URL Image:\n This looks like a British Shorthair cat."
        }
      ],
      "image_data": [],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/vision?lang=python"
      ],
      "section_id": "002-basic-images",
      "section_title": "Images basics"
    },
    {
      "id": "005-image-generation",
      "title": "Image generation (Gemini and Imagen)",
      "description": "This example demonstrates generating images using both Gemini 2.0 Flash and Imagen 3 models, focusing on cat-related prompts.",
      "order": 5,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 3,
          "line_range": [
            3,
            3
          ]
        },
        {
          "code": "# Import necessary libraries. Make sure Pillow is installed!\n",
          "display_code": "",
          "annotation": "Import necessary libraries. Make sure Pillow is installed!",
          "is_comment": true,
          "start_line": 4,
          "line_range": [
            4,
            4
          ],
          "target_line_range": [
            5,
            9
          ]
        },
        {
          "code": "from google import genai\nfrom google.genai import types\nfrom PIL import Image\nfrom io import BytesIO\n\n",
          "display_code": "from google import genai\nfrom google.genai import types\nfrom PIL import Image\nfrom io import BytesIO\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 5,
          "line_range": [
            5,
            9
          ]
        },
        {
          "code": "# Initialize the Gemini client with your API key\n",
          "display_code": "",
          "annotation": "Initialize the Gemini client with your API key",
          "is_comment": true,
          "start_line": 10,
          "line_range": [
            10,
            10
          ],
          "target_line_range": [
            11,
            12
          ]
        },
        {
          "code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\n",
          "display_code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 11,
          "line_range": [
            11,
            12
          ]
        },
        {
          "code": "# We start by using Gemini 2.0 Flash for image generation.\n# Demonstrates generating an image and associated text using Gemini 2.0 Flash.\n",
          "display_code": "",
          "annotation": "We start by using Gemini 2.0 Flash for image generation.\nDemonstrates generating an image and associated text using Gemini 2.0 Flash.",
          "is_comment": true,
          "start_line": 13,
          "line_range": [
            13,
            14
          ],
          "target_line_range": [
            15,
            25
          ]
        },
        {
          "code": "contents = (\n    \"Hi, can you create a 3D rendered image of a cat wearing a wizard hat, \"\n    \"casting a spell in a magical forest?\"\n)\n\nresponse = client.models.generate_content(\n    model=\"gemini-2.0-flash-exp-image-generation\",\n    contents=contents,\n    config=types.GenerateContentConfig(response_modalities=[\"Text\", \"Image\"]),\n)\n\n",
          "display_code": "contents = (\n    \"Hi, can you create a 3D rendered image of a cat wearing a wizard hat, \"\n    \"casting a spell in a magical forest?\"\n)\n\nresponse = client.models.generate_content(\n    model=\"gemini-2.0-flash-exp-image-generation\",\n    contents=contents,\n    config=types.GenerateContentConfig(response_modalities=[\"Text\", \"Image\"]),\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 15,
          "line_range": [
            15,
            25
          ]
        },
        {
          "code": "# Save the image to a file and display it\n",
          "display_code": "",
          "annotation": "Save the image to a file and display it",
          "is_comment": true,
          "start_line": 26,
          "line_range": [
            26,
            26
          ],
          "target_line_range": [
            27,
            34
          ]
        },
        {
          "code": "for part in response.candidates[0].content.parts:\n    if part.text is not None:\n        print(part.text)\n    elif part.inline_data is not None:\n        image = Image.open(BytesIO(part.inline_data.data))\n        image.save(\"gemini-cat-wizard.png\")\n        image.show()\n\n",
          "display_code": "for part in response.candidates[0].content.parts:\n    if part.text is not None:\n        print(part.text)\n    elif part.inline_data is not None:\n        image = Image.open(BytesIO(part.inline_data.data))\n        image.save(\"gemini-cat-wizard.png\")\n        image.show()\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 27,
          "line_range": [
            27,
            34
          ]
        },
        {
          "code": "# Now we use Imagen 3 for image generation.\n# Demonstrates generating multiple high-quality images of cats using Imagen 3.\n# Imagen 3 is only available on the Paid Tier and always includes a SynthID watermark.\n",
          "display_code": "",
          "annotation": "Now we use Imagen 3 for image generation.\nDemonstrates generating multiple high-quality images of cats using Imagen 3.\nImagen 3 is only available on the Paid Tier and always includes a SynthID watermark.",
          "is_comment": true,
          "start_line": 35,
          "line_range": [
            35,
            37
          ],
          "target_line_range": [
            38,
            43
          ]
        },
        {
          "code": "response = client.models.generate_images(\n    model=\"imagen-3.0-generate-002\",\n    prompt=\"A photorealistic image of a cat astronaut floating in space\",\n    config=types.GenerateImagesConfig(number_of_images=2),\n)\n\n",
          "display_code": "response = client.models.generate_images(\n    model=\"imagen-3.0-generate-002\",\n    prompt=\"A photorealistic image of a cat astronaut floating in space\",\n    config=types.GenerateImagesConfig(number_of_images=2),\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 38,
          "line_range": [
            38,
            43
          ]
        },
        {
          "code": "# Save the images to files and display them\n",
          "display_code": "",
          "annotation": "Save the images to files and display them",
          "is_comment": true,
          "start_line": 44,
          "line_range": [
            44,
            44
          ],
          "target_line_range": [
            45,
            48
          ]
        },
        {
          "code": "for i, generated_image in enumerate(response.generated_images):\n    image = Image.open(BytesIO(generated_image.image.image_bytes))\n    image.save(f\"imagen-cat-astronaut-{i+1}.png\")\n    image.show()\n",
          "display_code": "for i, generated_image in enumerate(response.generated_images):\n    image = Image.open(BytesIO(generated_image.image.image_bytes))\n    image.save(f\"imagen-cat-astronaut-{i+1}.png\")\n    image.show()\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 45,
          "line_range": [
            45,
            48
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library",
          "command": "pip install google-generative-ai Pillow",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python image-generation.py",
          "output": "# Expected output (will vary based on the model):\n# (Text describing the cat wizard image from Gemini 2.0 Flash)\n# (Two image windows will open, displaying the generated cat astronaut images from Imagen 3)\n# Image saved as gemini-cat-wizard.png\n# (Two image windows will open, displaying the generated cat astronaut images from Imagen 3)"
        }
      ],
      "image_data": [
        {
          "path": "examples/005-image-generation/cat-wizard.png",
          "filename": "cat-wizard.png",
          "caption": "Wizard"
        }
      ],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/image-generation"
      ],
      "section_id": "002-basic-images",
      "section_title": "Images basics"
    },
    {
      "id": "006-editing-images",
      "title": "Edit an image",
      "description": "This example demonstrates how to edit an existing image of a cat to add a hat using the Gemini API.",
      "order": 6,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 3,
          "line_range": [
            3,
            3
          ]
        },
        {
          "code": "# Import necessary libraries. Make sure Pillow is installed!\n",
          "display_code": "",
          "annotation": "Import necessary libraries. Make sure Pillow is installed!",
          "is_comment": true,
          "start_line": 4,
          "line_range": [
            4,
            4
          ],
          "target_line_range": [
            5,
            11
          ]
        },
        {
          "code": "from google import genai\nfrom google.genai import types\nfrom PIL import Image\nimport requests\nfrom io import BytesIO\nimport os\n\n",
          "display_code": "from google import genai\nfrom google.genai import types\nfrom PIL import Image\nimport requests\nfrom io import BytesIO\nimport os\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 5,
          "line_range": [
            5,
            11
          ]
        },
        {
          "code": "# Set your Gemini API key\n",
          "display_code": "",
          "annotation": "Set your Gemini API key",
          "is_comment": true,
          "start_line": 12,
          "line_range": [
            12,
            12
          ],
          "target_line_range": [
            13,
            14
          ]
        },
        {
          "code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\n",
          "display_code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 13,
          "line_range": [
            13,
            14
          ]
        },
        {
          "code": "# Download the cat image from cataas.com\n",
          "display_code": "",
          "annotation": "Download the cat image from cataas.com",
          "is_comment": true,
          "start_line": 15,
          "line_range": [
            15,
            15
          ],
          "target_line_range": [
            16,
            19
          ]
        },
        {
          "code": "image_url = \"https://cataas.com/cat\"\nresponse = requests.get(image_url)\ncat_image = Image.open(BytesIO(response.content))\n\n",
          "display_code": "image_url = \"https://cataas.com/cat\"\nresponse = requests.get(image_url)\ncat_image = Image.open(BytesIO(response.content))\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 16,
          "line_range": [
            16,
            19
          ]
        },
        {
          "code": "# Prepare a prompt.\n",
          "display_code": "",
          "annotation": "Prepare a prompt.",
          "is_comment": true,
          "start_line": 20,
          "line_range": [
            20,
            20
          ],
          "target_line_range": [
            21,
            22
          ]
        },
        {
          "code": "text_prompt = \"Please add a stylish top hat to this cat.\"\n\n",
          "display_code": "text_prompt = \"Please add a stylish top hat to this cat.\"\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 21,
          "line_range": [
            21,
            22
          ]
        },
        {
          "code": "# Generate content with the Gemini API\n",
          "display_code": "",
          "annotation": "Generate content with the Gemini API",
          "is_comment": true,
          "start_line": 23,
          "line_range": [
            23,
            23
          ],
          "target_line_range": [
            24,
            30
          ]
        },
        {
          "code": "model = \"gemini-2.0-flash-exp-image-generation\"\nresponse = client.models.generate_content(\n    model=model,\n    contents=[text_prompt, cat_image],\n    config=types.GenerateContentConfig(response_modalities=[\"Text\", \"Image\"]),\n)\n\n",
          "display_code": "model = \"gemini-2.0-flash-exp-image-generation\"\nresponse = client.models.generate_content(\n    model=model,\n    contents=[text_prompt, cat_image],\n    config=types.GenerateContentConfig(response_modalities=[\"Text\", \"Image\"]),\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 24,
          "line_range": [
            24,
            30
          ]
        },
        {
          "code": "# Process the response. Retry if you get a 500 error.\n",
          "display_code": "",
          "annotation": "Process the response. Retry if you get a 500 error.",
          "is_comment": true,
          "start_line": 31,
          "line_range": [
            31,
            31
          ],
          "target_line_range": [
            32,
            36
          ]
        },
        {
          "code": "for part in response.candidates[0].content.parts:\n    if part.text is not None:\n        print(part.text)\n    elif part.inline_data is not None:\n        print(f\"Received {part.inline_data.mime_type} data\")\n",
          "display_code": "for part in response.candidates[0].content.parts:\n    if part.text is not None:\n        print(part.text)\n    elif part.inline_data is not None:\n        print(f\"Received {part.inline_data.mime_type} data\")\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 32,
          "line_range": [
            32,
            36
          ]
        },
        {
          "code": "        # The data is provided as raw bytes, not base64-encoded\n",
          "display_code": "",
          "annotation": "The data is provided as raw bytes, not base64-encoded",
          "is_comment": true,
          "start_line": 37,
          "line_range": [
            37,
            37
          ],
          "target_line_range": [
            38,
            40
          ]
        },
        {
          "code": "        image = Image.open(BytesIO(part.inline_data.data))\n        image.save(\"cat_with_hat.png\")\n        print(\"\\nImage saved as cat_with_hat.png\")\n",
          "display_code": "        image = Image.open(BytesIO(part.inline_data.data))\n        image.save(\"cat_with_hat.png\")\n        print(\"\\nImage saved as cat_with_hat.png\")\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 38,
          "line_range": [
            38,
            40
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library",
          "command": "pip install google-generative-ai Pillow requests",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python edit_cat.py",
          "output": ""
        }
      ],
      "image_data": [
        {
          "path": "examples/006-editing-images/cat_with_hat.png",
          "filename": "cat_with_hat.png",
          "caption": "cat_with_hat"
        }
      ],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/image-generation#gemini-image-editing"
      ],
      "section_id": "002-basic-images",
      "section_title": "Images basics"
    },
    {
      "id": "007-bounding-boxes",
      "title": "Bounding boxes",
      "description": "This example demonstrates how to use the Gemini API to detect an object (a cat) in an image and retrieve its bounding box coordinates.",
      "order": 7,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 3,
          "line_range": [
            3,
            3
          ]
        },
        {
          "code": "# Import necessary libraries. Make sure Pillow is installed!\n",
          "display_code": "",
          "annotation": "Import necessary libraries. Make sure Pillow is installed!",
          "is_comment": true,
          "start_line": 4,
          "line_range": [
            4,
            4
          ],
          "target_line_range": [
            5,
            9
          ]
        },
        {
          "code": "from google import genai\nimport requests\nfrom PIL import Image\nfrom io import BytesIO\n\n",
          "display_code": "from google import genai\nimport requests\nfrom PIL import Image\nfrom io import BytesIO\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 5,
          "line_range": [
            5,
            9
          ]
        },
        {
          "code": "# Initialize the Gemini client with your API key\n",
          "display_code": "",
          "annotation": "Initialize the Gemini client with your API key",
          "is_comment": true,
          "start_line": 10,
          "line_range": [
            10,
            10
          ],
          "target_line_range": [
            11,
            12
          ]
        },
        {
          "code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\n",
          "display_code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 11,
          "line_range": [
            11,
            12
          ]
        },
        {
          "code": "# Specify the prompt, asking for a bounding box around the cat\n",
          "display_code": "",
          "annotation": "Specify the prompt, asking for a bounding box around the cat",
          "is_comment": true,
          "start_line": 13,
          "line_range": [
            13,
            13
          ],
          "target_line_range": [
            14,
            18
          ]
        },
        {
          "code": "prompt = (\n    \"Return a bounding box for the cat in this image \"\n    \"in [ymin, xmin, ymax, xmax] format.\"\n)\n\n",
          "display_code": "prompt = (\n    \"Return a bounding box for the cat in this image \"\n    \"in [ymin, xmin, ymax, xmax] format.\"\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 14,
          "line_range": [
            14,
            18
          ]
        },
        {
          "code": "# Download the cat image from cataas.com\n",
          "display_code": "",
          "annotation": "Download the cat image from cataas.com",
          "is_comment": true,
          "start_line": 19,
          "line_range": [
            19,
            19
          ],
          "target_line_range": [
            20,
            23
          ]
        },
        {
          "code": "image_url = \"https://cataas.com/cat\"\nresponse = requests.get(image_url)\ncat_image = Image.open(BytesIO(response.content))\n\n",
          "display_code": "image_url = \"https://cataas.com/cat\"\nresponse = requests.get(image_url)\ncat_image = Image.open(BytesIO(response.content))\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 20,
          "line_range": [
            20,
            23
          ]
        },
        {
          "code": "# Call the Gemini API to generate content with the image and prompt\n",
          "display_code": "",
          "annotation": "Call the Gemini API to generate content with the image and prompt",
          "is_comment": true,
          "start_line": 24,
          "line_range": [
            24,
            24
          ],
          "target_line_range": [
            25,
            28
          ]
        },
        {
          "code": "response = client.models.generate_content(\n    model=\"gemini-1.5-pro\", contents=[cat_image, prompt]\n)\n\n",
          "display_code": "response = client.models.generate_content(\n    model=\"gemini-1.5-pro\", contents=[cat_image, prompt]\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 25,
          "line_range": [
            25,
            28
          ]
        },
        {
          "code": "# Print the response text, which will contain the bounding box coordinates\n",
          "display_code": "",
          "annotation": "Print the response text, which will contain the bounding box coordinates",
          "is_comment": true,
          "start_line": 29,
          "line_range": [
            29,
            29
          ],
          "target_line_range": [
            30,
            31
          ]
        },
        {
          "code": "print(response.text)\n\n",
          "display_code": "print(response.text)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 30,
          "line_range": [
            30,
            31
          ]
        },
        {
          "code": "#\n# Normalize Coordinates\n# The model returns bounding box coordinates in the format [y_min, x_min, y_max, x_max].\n# To convert these normalized coordinates to the pixel coordinates of your original image, follow these steps:\n# 1. Divide each output coordinate by 1000.\n# 2. Multiply the x-coordinates by the original image width.\n# 3. Multiply the y-coordinates by the original image height.\n#\n# Example Calculation (assuming the model returns [200, 300, 700, 800] and the image is 1000x800):\n",
          "display_code": "",
          "annotation": "Normalize Coordinates\nThe model returns bounding box coordinates in the format [y_min, x_min, y_max, x_max].\nTo convert these normalized coordinates to the pixel coordinates of your original image, follow these steps:\n1. Divide each output coordinate by 1000.\n2. Multiply the x-coordinates by the original image width.\n3. Multiply the y-coordinates by the original image height.\n\nExample Calculation (assuming the model returns [200, 300, 700, 800] and the image is 1000x800):",
          "is_comment": true,
          "start_line": 32,
          "line_range": [
            32,
            40
          ],
          "target_line_range": [
            41,
            44
          ]
        },
        {
          "code": "y_min = (200 / 1000) * 800  # 160\nx_min = (300 / 1000) * 1000  # 300\ny_max = (700 / 1000) * 800  # 560\nx_max = (800 / 1000) * 1000  # 800\n",
          "display_code": "y_min = (200 / 1000) * 800  # 160\nx_min = (300 / 1000) * 1000  # 300\ny_max = (700 / 1000) * 800  # 560\nx_max = (800 / 1000) * 1000  # 800\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 41,
          "line_range": [
            41,
            44
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library, requests, and Pillow",
          "command": "pip install google-generative-ai Pillow requests",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python object-detection.py",
          "output": "[0.1, 0.2, 0.7, 0.8]"
        }
      ],
      "image_data": [],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/vision?lang=python#bbox"
      ],
      "section_id": "002-basic-images",
      "section_title": "Images basics"
    },
    {
      "id": "008-image-segmentation",
      "title": "Image segmentation",
      "description": "This example demonstrates how to use the Gemini API to perform image segmentation on a picture of a cat.",
      "order": 8,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 3,
          "line_range": [
            3,
            3
          ]
        },
        {
          "code": "# Import the Gemini API and necessary libraries. Make sure Pillow is installed!\n",
          "display_code": "",
          "annotation": "Import the Gemini API and necessary libraries. Make sure Pillow is installed!",
          "is_comment": true,
          "start_line": 4,
          "line_range": [
            4,
            4
          ],
          "target_line_range": [
            5,
            12
          ]
        },
        {
          "code": "from google import genai\nimport os\nimport requests\nfrom PIL import Image\nfrom io import BytesIO\nimport json\nimport base64\n\n",
          "display_code": "from google import genai\nimport os\nimport requests\nfrom PIL import Image\nfrom io import BytesIO\nimport json\nimport base64\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 5,
          "line_range": [
            5,
            12
          ]
        },
        {
          "code": "# Initialize the Gemini client with your API key\n",
          "display_code": "",
          "annotation": "Initialize the Gemini client with your API key",
          "is_comment": true,
          "start_line": 13,
          "line_range": [
            13,
            13
          ],
          "target_line_range": [
            14,
            15
          ]
        },
        {
          "code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\n",
          "display_code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 14,
          "line_range": [
            14,
            15
          ]
        },
        {
          "code": "# Define the prompt for image segmentation, focusing on cats\n",
          "display_code": "",
          "annotation": "Define the prompt for image segmentation, focusing on cats",
          "is_comment": true,
          "start_line": 16,
          "line_range": [
            16,
            16
          ],
          "target_line_range": [
            17,
            23
          ]
        },
        {
          "code": "prompt = \"\"\"\nGive the segmentation masks for the cat in the image.\nOutput a JSON list of segmentation masks where each entry contains the 2D\nbounding box in the key \\\"box_2d\\\", the segmentation mask in key \\\"mask\\\", and\nthe text label in the key \\\"label\\\". Use descriptive labels.\n\"\"\"\n\n",
          "display_code": "prompt = \"\"\"\nGive the segmentation masks for the cat in the image.\nOutput a JSON list of segmentation masks where each entry contains the 2D\nbounding box in the key \\\"box_2d\\\", the segmentation mask in key \\\"mask\\\", and\nthe text label in the key \\\"label\\\". Use descriptive labels.\n\"\"\"\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 17,
          "line_range": [
            17,
            23
          ]
        },
        {
          "code": "# Download the cat image from cataas.com\n",
          "display_code": "",
          "annotation": "Download the cat image from cataas.com",
          "is_comment": true,
          "start_line": 24,
          "line_range": [
            24,
            24
          ],
          "target_line_range": [
            25,
            28
          ]
        },
        {
          "code": "image_url = \"https://cataas.com/cat\"\nresponse = requests.get(image_url)\ncat_image = Image.open(BytesIO(response.content))\n\n",
          "display_code": "image_url = \"https://cataas.com/cat\"\nresponse = requests.get(image_url)\ncat_image = Image.open(BytesIO(response.content))\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 25,
          "line_range": [
            25,
            28
          ]
        },
        {
          "code": "# Save the original image\n",
          "display_code": "",
          "annotation": "Save the original image",
          "is_comment": true,
          "start_line": 29,
          "line_range": [
            29,
            29
          ],
          "target_line_range": [
            30,
            33
          ]
        },
        {
          "code": "original_filename = f\"cat_original.png\"\ncat_image.save(original_filename)\nprint(f\"Original image saved as: {original_filename}\")\n\n",
          "display_code": "original_filename = f\"cat_original.png\"\ncat_image.save(original_filename)\nprint(f\"Original image saved as: {original_filename}\")\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 30,
          "line_range": [
            30,
            33
          ]
        },
        {
          "code": "# Call the Gemini API to generate content with the image and prompt\n",
          "display_code": "",
          "annotation": "Call the Gemini API to generate content with the image and prompt",
          "is_comment": true,
          "start_line": 34,
          "line_range": [
            34,
            34
          ],
          "target_line_range": [
            35,
            38
          ]
        },
        {
          "code": "response = client.models.generate_content(\n    model=\"gemini-2.5-pro-exp-03-25\", contents=[cat_image, prompt]\n)\n\n",
          "display_code": "response = client.models.generate_content(\n    model=\"gemini-2.5-pro-exp-03-25\", contents=[cat_image, prompt]\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 35,
          "line_range": [
            35,
            38
          ]
        },
        {
          "code": "# Print the response containing segmentation information.\n",
          "display_code": "",
          "annotation": "Print the response containing segmentation information.",
          "is_comment": true,
          "start_line": 39,
          "line_range": [
            39,
            39
          ],
          "target_line_range": [
            40,
            41
          ]
        },
        {
          "code": "print(response.text)\n\n",
          "display_code": "print(response.text)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 40,
          "line_range": [
            40,
            41
          ]
        },
        {
          "code": "# Display and save the overlaid mask.\n# Extract the JSON part from the response (it might be wrapped in markdown)\n",
          "display_code": "",
          "annotation": "Display and save the overlaid mask.\nExtract the JSON part from the response (it might be wrapped in markdown)",
          "is_comment": true,
          "start_line": 42,
          "line_range": [
            42,
            43
          ],
          "target_line_range": [
            44,
            53
          ]
        },
        {
          "code": "response_text = response.text\nif \"```json\" in response_text:\n    json_str = response_text.split(\"```json\")[1].split(\"```\")[0].strip()\nelif \"[\" in response_text and \"]\" in response_text:\n    start = response_text.find(\"[\")\n    end = response_text.rfind(\"]\") + 1\n    json_str = response_text[start:end]\nelse:\n    json_str = response_text\n\n",
          "display_code": "response_text = response.text\nif \"```json\" in response_text:\n    json_str = response_text.split(\"```json\")[1].split(\"```\")[0].strip()\nelif \"[\" in response_text and \"]\" in response_text:\n    start = response_text.find(\"[\")\n    end = response_text.rfind(\"]\") + 1\n    json_str = response_text[start:end]\nelse:\n    json_str = response_text\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 44,
          "line_range": [
            44,
            53
          ]
        },
        {
          "code": "# Parse JSON data\n",
          "display_code": "",
          "annotation": "Parse JSON data",
          "is_comment": true,
          "start_line": 54,
          "line_range": [
            54,
            54
          ],
          "target_line_range": [
            55,
            56
          ]
        },
        {
          "code": "mask_data = json.loads(json_str)\n\n",
          "display_code": "mask_data = json.loads(json_str)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 55,
          "line_range": [
            55,
            56
          ]
        },
        {
          "code": "# Get the first mask. This assumes a mask was returned.\n",
          "display_code": "",
          "annotation": "Get the first mask. This assumes a mask was returned.",
          "is_comment": true,
          "start_line": 57,
          "line_range": [
            57,
            57
          ],
          "target_line_range": [
            58,
            59
          ]
        },
        {
          "code": "first_mask = mask_data[0]\n\n",
          "display_code": "first_mask = mask_data[0]\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 58,
          "line_range": [
            58,
            59
          ]
        },
        {
          "code": "# Extract base64 encoded mask\n",
          "display_code": "",
          "annotation": "Extract base64 encoded mask",
          "is_comment": true,
          "start_line": 60,
          "line_range": [
            60,
            60
          ],
          "target_line_range": [
            61,
            64
          ]
        },
        {
          "code": "mask_base64 = first_mask.get(\"mask\", \"\")\nif \"base64,\" in mask_base64:\n    mask_base64 = mask_base64.split(\"base64,\")[1]\n\n",
          "display_code": "mask_base64 = first_mask.get(\"mask\", \"\")\nif \"base64,\" in mask_base64:\n    mask_base64 = mask_base64.split(\"base64,\")[1]\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 61,
          "line_range": [
            61,
            64
          ]
        },
        {
          "code": "# Decode and load the mask image\n",
          "display_code": "",
          "annotation": "Decode and load the mask image",
          "is_comment": true,
          "start_line": 65,
          "line_range": [
            65,
            65
          ],
          "target_line_range": [
            66,
            68
          ]
        },
        {
          "code": "mask_bytes = base64.b64decode(mask_base64)\nmask_image = Image.open(BytesIO(mask_bytes))\n\n",
          "display_code": "mask_bytes = base64.b64decode(mask_base64)\nmask_image = Image.open(BytesIO(mask_bytes))\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 66,
          "line_range": [
            66,
            68
          ]
        },
        {
          "code": "# Convert images to RGBA\n",
          "display_code": "",
          "annotation": "Convert images to RGBA",
          "is_comment": true,
          "start_line": 69,
          "line_range": [
            69,
            69
          ],
          "target_line_range": [
            70,
            72
          ]
        },
        {
          "code": "cat_image = cat_image.convert(\"RGBA\")\nmask_image = mask_image.convert(\"L\")  # Convert mask to grayscale\n\n",
          "display_code": "cat_image = cat_image.convert(\"RGBA\")\nmask_image = mask_image.convert(\"L\")  # Convert mask to grayscale\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 70,
          "line_range": [
            70,
            72
          ]
        },
        {
          "code": "# Create a bright colored overlay (bright pink)\n",
          "display_code": "",
          "annotation": "Create a bright colored overlay (bright pink)",
          "is_comment": true,
          "start_line": 73,
          "line_range": [
            73,
            73
          ],
          "target_line_range": [
            74,
            77
          ]
        },
        {
          "code": "overlay = Image.new(\n    \"RGBA\", mask_image.size, (255, 0, 255, 128)\n)  # Bright pink, semi-transparent\n\n",
          "display_code": "overlay = Image.new(\n    \"RGBA\", mask_image.size, (255, 0, 255, 128)\n)  # Bright pink, semi-transparent\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 74,
          "line_range": [
            74,
            77
          ]
        },
        {
          "code": "# Use the mask to determine where to apply the color.\n# We need the mask as an alpha channel\n",
          "display_code": "",
          "annotation": "Use the mask to determine where to apply the color.\nWe need the mask as an alpha channel",
          "is_comment": true,
          "start_line": 78,
          "line_range": [
            78,
            79
          ],
          "target_line_range": [
            80,
            81
          ]
        },
        {
          "code": "overlay.putalpha(mask_image)\n\n",
          "display_code": "overlay.putalpha(mask_image)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 80,
          "line_range": [
            80,
            81
          ]
        },
        {
          "code": "# Resize the overlay to match the original image if needed\n",
          "display_code": "",
          "annotation": "Resize the overlay to match the original image if needed",
          "is_comment": true,
          "start_line": 82,
          "line_range": [
            82,
            82
          ],
          "target_line_range": [
            83,
            85
          ]
        },
        {
          "code": "if overlay.size != cat_image.size:\n    overlay = overlay.resize(cat_image.size)\n\n",
          "display_code": "if overlay.size != cat_image.size:\n    overlay = overlay.resize(cat_image.size)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 83,
          "line_range": [
            83,
            85
          ]
        },
        {
          "code": "# Overlay the colored mask on the original image. Save both images.\n",
          "display_code": "",
          "annotation": "Overlay the colored mask on the original image. Save both images.",
          "is_comment": true,
          "start_line": 86,
          "line_range": [
            86,
            86
          ],
          "target_line_range": [
            87,
            93
          ]
        },
        {
          "code": "result = Image.alpha_composite(cat_image, overlay)\n\nmask_filename = f\"cat_mask.png\"\nmask_image.save(mask_filename)\n\nmerged_filename = f\"cat_with_mask.png\"\nresult.save(merged_filename)\n",
          "display_code": "result = Image.alpha_composite(cat_image, overlay)\n\nmask_filename = f\"cat_mask.png\"\nmask_image.save(mask_filename)\n\nmerged_filename = f\"cat_with_mask.png\"\nresult.save(merged_filename)\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 87,
          "line_range": [
            87,
            93
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library",
          "command": "pip install google-generative-ai",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python cat_segmentation.py",
          "output": "# Expected output (example):\n# [{\"box_2d\": [100, 50, 900, 750], \"mask\": \"base64_encoded_png_data\", \"label\": \"Main Coon Cat\"}, ...]"
        }
      ],
      "image_data": [
        {
          "path": "examples/008-image-segmentation/image-segmentation.png",
          "filename": "image-segmentation.png",
          "caption": "Segmentation"
        }
      ],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/vision?lang=python#image_segmentation"
      ],
      "section_id": "002-basic-images",
      "section_title": "Images basics"
    },
    {
      "id": "009-audio-q-a",
      "title": "Audio question answering",
      "description": "This example demonstrates how to ask a question about the content of an audio file using the Gemini API.",
      "order": 9,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 3,
          "line_range": [
            3,
            3
          ]
        },
        {
          "code": "# Import the necessary libraries\n",
          "display_code": "",
          "annotation": "Import the necessary libraries",
          "is_comment": true,
          "start_line": 4,
          "line_range": [
            4,
            4
          ],
          "target_line_range": [
            5,
            9
          ]
        },
        {
          "code": "from google import genai\nfrom google.genai import types\nimport requests\nimport os\n\n",
          "display_code": "from google import genai\nfrom google.genai import types\nimport requests\nimport os\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 5,
          "line_range": [
            5,
            9
          ]
        },
        {
          "code": "# Replace with your actual API key\n",
          "display_code": "",
          "annotation": "Replace with your actual API key",
          "is_comment": true,
          "start_line": 10,
          "line_range": [
            10,
            10
          ],
          "target_line_range": [
            11,
            12
          ]
        },
        {
          "code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\n",
          "display_code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 11,
          "line_range": [
            11,
            12
          ]
        },
        {
          "code": "# Define a descriptive User-Agent following Wikimedia's policy\n",
          "display_code": "",
          "annotation": "Define a descriptive User-Agent following Wikimedia's policy",
          "is_comment": true,
          "start_line": 13,
          "line_range": [
            13,
            13
          ],
          "target_line_range": [
            14,
            15
          ]
        },
        {
          "code": "user_agent = \"GeminiByExample/1.0 (https://github.com/strickvl/geminibyexample; contact@example.org) python-requests/2.0\"\n\n",
          "display_code": "user_agent = \"GeminiByExample/1.0 (https://github.com/strickvl/geminibyexample; contact@example.org) python-requests/2.0\"\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 14,
          "line_range": [
            14,
            15
          ]
        },
        {
          "code": "# Download the audio file from the URL\n",
          "display_code": "",
          "annotation": "Download the audio file from the URL",
          "is_comment": true,
          "start_line": 16,
          "line_range": [
            16,
            16
          ],
          "target_line_range": [
            17,
            21
          ]
        },
        {
          "code": "url = \"https://upload.wikimedia.org/wikipedia/commons/1/1f/%22DayBreak%22_with_Jay_Young_on_the_USA_Radio_Network.ogg\"\nheaders = {\"User-Agent\": user_agent}\nresponse = requests.get(url, headers=headers)\nresponse.raise_for_status()  # Raise an exception for bad status codes\n\n",
          "display_code": "url = \"https://upload.wikimedia.org/wikipedia/commons/1/1f/%22DayBreak%22_with_Jay_Young_on_the_USA_Radio_Network.ogg\"\nheaders = {\"User-Agent\": user_agent}\nresponse = requests.get(url, headers=headers)\nresponse.raise_for_status()  # Raise an exception for bad status codes\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 17,
          "line_range": [
            17,
            21
          ]
        },
        {
          "code": "# Save the content to a variable\n# Note: If your audio file is larger than 20MB, you should use the File API to upload the file first.\n# The File API allows you to upload larger files and then reference them in your requests.\n",
          "display_code": "",
          "annotation": "Save the content to a variable\nNote: If your audio file is larger than 20MB, you should use the File API to upload the file first.\nThe File API allows you to upload larger files and then reference them in your requests.",
          "is_comment": true,
          "start_line": 22,
          "line_range": [
            22,
            24
          ],
          "target_line_range": [
            25,
            26
          ]
        },
        {
          "code": "audio_bytes = response.content\n\n",
          "display_code": "audio_bytes = response.content\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 25,
          "line_range": [
            25,
            26
          ]
        },
        {
          "code": "# You can now pass that audio file along with the prompt to Gemini\n",
          "display_code": "",
          "annotation": "You can now pass that audio file along with the prompt to Gemini",
          "is_comment": true,
          "start_line": 27,
          "line_range": [
            27,
            27
          ],
          "target_line_range": [
            28,
            39
          ]
        },
        {
          "code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\n        \"What is the main topic of this audio?\",\n        types.Part.from_bytes(\n            data=audio_bytes,\n            mime_type=\"audio/ogg\",\n        ),\n    ],\n)\n\nprint(response.text)\n",
          "display_code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\n        \"What is the main topic of this audio?\",\n        types.Part.from_bytes(\n            data=audio_bytes,\n            mime_type=\"audio/ogg\",\n        ),\n    ],\n)\n\nprint(response.text)\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 28,
          "line_range": [
            28,
            39
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library and requests",
          "command": "pip install google-generative-ai requests",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python audio-question.py",
          "output": "This audio features a male host and a travel expert, Pete Trabucco."
        }
      ],
      "image_data": [],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/audio?lang=python"
      ],
      "section_id": "003-basic-audio",
      "section_title": "Audio basics"
    },
    {
      "id": "010-audio-transcription",
      "title": "Audio transcription",
      "description": "This example demonstrates how to transcribe an audio file by providing the audio data inline with the request.",
      "order": 10,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 3,
          "line_range": [
            3,
            3
          ]
        },
        {
          "code": "# Import the necessary modules\n",
          "display_code": "",
          "annotation": "Import the necessary modules",
          "is_comment": true,
          "start_line": 4,
          "line_range": [
            4,
            4
          ],
          "target_line_range": [
            5,
            8
          ]
        },
        {
          "code": "from google import genai\nfrom google.genai import types\nimport requests\n\n",
          "display_code": "from google import genai\nfrom google.genai import types\nimport requests\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 5,
          "line_range": [
            5,
            8
          ]
        },
        {
          "code": "# Initialize the Gemini client with your API key\n",
          "display_code": "",
          "annotation": "Initialize the Gemini client with your API key",
          "is_comment": true,
          "start_line": 9,
          "line_range": [
            9,
            9
          ],
          "target_line_range": [
            10,
            11
          ]
        },
        {
          "code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\n",
          "display_code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 10,
          "line_range": [
            10,
            11
          ]
        },
        {
          "code": "# Define a descriptive User-Agent following Wikimedia's policy\n",
          "display_code": "",
          "annotation": "Define a descriptive User-Agent following Wikimedia's policy",
          "is_comment": true,
          "start_line": 12,
          "line_range": [
            12,
            12
          ],
          "target_line_range": [
            13,
            14
          ]
        },
        {
          "code": "user_agent = \"GeminiByExample/1.0 (https://github.com/strickvl/geminibyexample; contact@example.org) python-requests/2.0\"\n\n",
          "display_code": "user_agent = \"GeminiByExample/1.0 (https://github.com/strickvl/geminibyexample; contact@example.org) python-requests/2.0\"\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 13,
          "line_range": [
            13,
            14
          ]
        },
        {
          "code": "# Download the audio file from the URL\n",
          "display_code": "",
          "annotation": "Download the audio file from the URL",
          "is_comment": true,
          "start_line": 15,
          "line_range": [
            15,
            15
          ],
          "target_line_range": [
            16,
            20
          ]
        },
        {
          "code": "url = \"https://upload.wikimedia.org/wikipedia/commons/1/1f/%22DayBreak%22_with_Jay_Young_on_the_USA_Radio_Network.ogg\"\nheaders = {\"User-Agent\": user_agent}\nresponse = requests.get(url, headers=headers)\nresponse.raise_for_status()  # Raise an exception for bad status codes\n\n",
          "display_code": "url = \"https://upload.wikimedia.org/wikipedia/commons/1/1f/%22DayBreak%22_with_Jay_Young_on_the_USA_Radio_Network.ogg\"\nheaders = {\"User-Agent\": user_agent}\nresponse = requests.get(url, headers=headers)\nresponse.raise_for_status()  # Raise an exception for bad status codes\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 16,
          "line_range": [
            16,
            20
          ]
        },
        {
          "code": "# Read the audio file as bytes\n# Note: If your audio file is larger than 20MB, you should use the File API to upload the file first.\n# The File API allows you to upload larger files and then reference them in your requests.\n",
          "display_code": "",
          "annotation": "Read the audio file as bytes\nNote: If your audio file is larger than 20MB, you should use the File API to upload the file first.\nThe File API allows you to upload larger files and then reference them in your requests.",
          "is_comment": true,
          "start_line": 21,
          "line_range": [
            21,
            23
          ],
          "target_line_range": [
            24,
            25
          ]
        },
        {
          "code": "audio_bytes = response.content\n\n",
          "display_code": "audio_bytes = response.content\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 24,
          "line_range": [
            24,
            25
          ]
        },
        {
          "code": "# Call the API to generate a transcription of the audio clip\n",
          "display_code": "",
          "annotation": "Call the API to generate a transcription of the audio clip",
          "is_comment": true,
          "start_line": 26,
          "line_range": [
            26,
            26
          ],
          "target_line_range": [
            27,
            37
          ]
        },
        {
          "code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\n        \"Transcribe this audio clip\",\n        types.Part.from_bytes(\n            data=audio_bytes,\n            mime_type=\"audio/ogg\",\n        ),\n    ],\n)\n\n",
          "display_code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\n        \"Transcribe this audio clip\",\n        types.Part.from_bytes(\n            data=audio_bytes,\n            mime_type=\"audio/ogg\",\n        ),\n    ],\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 27,
          "line_range": [
            27,
            37
          ]
        },
        {
          "code": "# Print the transcribed text\n",
          "display_code": "",
          "annotation": "Print the transcribed text",
          "is_comment": true,
          "start_line": 38,
          "line_range": [
            38,
            38
          ],
          "target_line_range": [
            39,
            39
          ]
        },
        {
          "code": "print(response.text)\n",
          "display_code": "print(response.text)\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 39,
          "line_range": [
            39,
            39
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library",
          "command": "pip install google-generative-ai",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python audio-transcription.py",
          "output": "We're joined once again by our travel expert and also author of America's Top Roller Coasters and Amusement Parks, Pete Trabucco. Good morning and welcome back to Daybreak USA. Well, thanks for having me on. If someone's lucky enough to go on vacation to an exotic location, and then maybe not so lucky to have some kind of a disaster happen while they're there, maybe some civil unrest. What should they do now? What's the next step? Well, whenever you're going on vacation whether it's locally or internationally, you've got to be uh very careful."
        }
      ],
      "image_data": [],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/audio?lang=python"
      ],
      "section_id": "003-basic-audio",
      "section_title": "Audio basics"
    },
    {
      "id": "011-audio-summarization",
      "title": "Audio summarization",
      "description": "This example demonstrates how to summarize the content of an audio file using the Gemini API.",
      "order": 11,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 3,
          "line_range": [
            3,
            3
          ]
        },
        {
          "code": "# Import the necessary libraries\n",
          "display_code": "",
          "annotation": "Import the necessary libraries",
          "is_comment": true,
          "start_line": 4,
          "line_range": [
            4,
            4
          ],
          "target_line_range": [
            5,
            9
          ]
        },
        {
          "code": "from google import genai\nfrom google.genai import types\nimport requests\nimport os\n\n",
          "display_code": "from google import genai\nfrom google.genai import types\nimport requests\nimport os\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 5,
          "line_range": [
            5,
            9
          ]
        },
        {
          "code": "# Replace with your actual API key\n",
          "display_code": "",
          "annotation": "Replace with your actual API key",
          "is_comment": true,
          "start_line": 10,
          "line_range": [
            10,
            10
          ],
          "target_line_range": [
            11,
            12
          ]
        },
        {
          "code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\n",
          "display_code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 11,
          "line_range": [
            11,
            12
          ]
        },
        {
          "code": "# Define a descriptive User-Agent following Wikimedia's policy\n",
          "display_code": "",
          "annotation": "Define a descriptive User-Agent following Wikimedia's policy",
          "is_comment": true,
          "start_line": 13,
          "line_range": [
            13,
            13
          ],
          "target_line_range": [
            14,
            15
          ]
        },
        {
          "code": "user_agent = \"GeminiByExample/1.0 (https://github.com/strickvl/geminibyexample; contact@example.org) python-requests/2.0\"\n\n",
          "display_code": "user_agent = \"GeminiByExample/1.0 (https://github.com/strickvl/geminibyexample; contact@example.org) python-requests/2.0\"\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 14,
          "line_range": [
            14,
            15
          ]
        },
        {
          "code": "# Download the audio file from the URL\n",
          "display_code": "",
          "annotation": "Download the audio file from the URL",
          "is_comment": true,
          "start_line": 16,
          "line_range": [
            16,
            16
          ],
          "target_line_range": [
            17,
            21
          ]
        },
        {
          "code": "url = \"https://upload.wikimedia.org/wikipedia/commons/1/1f/%22DayBreak%22_with_Jay_Young_on_the_USA_Radio_Network.ogg\"\nheaders = {\"User-Agent\": user_agent}\nresponse = requests.get(url, headers=headers)\nresponse.raise_for_status()  # Raise an exception for bad status codes\n\n",
          "display_code": "url = \"https://upload.wikimedia.org/wikipedia/commons/1/1f/%22DayBreak%22_with_Jay_Young_on_the_USA_Radio_Network.ogg\"\nheaders = {\"User-Agent\": user_agent}\nresponse = requests.get(url, headers=headers)\nresponse.raise_for_status()  # Raise an exception for bad status codes\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 17,
          "line_range": [
            17,
            21
          ]
        },
        {
          "code": "# Save the content to a variable\n# Note: If your audio file is larger than 20MB, you should use the File API to upload the file first.\n# The File API allows you to upload larger files and then reference them in your requests.\n",
          "display_code": "",
          "annotation": "Save the content to a variable\nNote: If your audio file is larger than 20MB, you should use the File API to upload the file first.\nThe File API allows you to upload larger files and then reference them in your requests.",
          "is_comment": true,
          "start_line": 22,
          "line_range": [
            22,
            24
          ],
          "target_line_range": [
            25,
            26
          ]
        },
        {
          "code": "audio_bytes = response.content\n\n",
          "display_code": "audio_bytes = response.content\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 25,
          "line_range": [
            25,
            26
          ]
        },
        {
          "code": "# You can now pass that audio file along with the prompt to Gemini\n",
          "display_code": "",
          "annotation": "You can now pass that audio file along with the prompt to Gemini",
          "is_comment": true,
          "start_line": 27,
          "line_range": [
            27,
            27
          ],
          "target_line_range": [
            28,
            39
          ]
        },
        {
          "code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\n        \"What is this audio about?\",\n        types.Part.from_bytes(\n            data=audio_bytes,\n            mime_type=\"audio/ogg\",\n        ),\n    ],\n)\n\nprint(response.text)\n",
          "display_code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\n        \"What is this audio about?\",\n        types.Part.from_bytes(\n            data=audio_bytes,\n            mime_type=\"audio/ogg\",\n        ),\n    ],\n)\n\nprint(response.text)\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 28,
          "line_range": [
            28,
            39
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library and requests",
          "command": "pip install google-generative-ai requests",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python audio-summarization.py",
          "output": "This audio is about travel tips, particularly what to do in the event of a disaster while on vacation.\nThe speaker emphasizes the importance of staying informed about the destination, traveling with a buddy,\nhaving a plan in place, and investing in travel insurance. They also mention the importance of connecting\nwith home base and knowing the location of the American Red Cross in case of emergencies."
        }
      ],
      "image_data": [],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/audio?lang=python"
      ],
      "section_id": "003-basic-audio",
      "section_title": "Audio basics"
    },
    {
      "id": "012-video-q-a",
      "title": "Video question answering",
      "description": "This example demonstrates how to ask questions about a video using the Gemini API.\nNote: For videos larger than 20MB, you must use the File API for uploading.",
      "order": 12,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 4,
          "line_range": [
            4,
            4
          ]
        },
        {
          "code": "# Import the Gemini API\n",
          "display_code": "",
          "annotation": "Import the Gemini API",
          "is_comment": true,
          "start_line": 5,
          "line_range": [
            5,
            5
          ],
          "target_line_range": [
            6,
            10
          ]
        },
        {
          "code": "from google import genai\nfrom google.genai import types\nimport os\nimport requests\n\n",
          "display_code": "from google import genai\nfrom google.genai import types\nimport os\nimport requests\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 6,
          "line_range": [
            6,
            10
          ]
        },
        {
          "code": "# Initialize the Gemini client with your API key\n",
          "display_code": "",
          "annotation": "Initialize the Gemini client with your API key",
          "is_comment": true,
          "start_line": 11,
          "line_range": [
            11,
            11
          ],
          "target_line_range": [
            12,
            15
          ]
        },
        {
          "code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\nvideo_url = \"https://download.samplelib.com/mp4/sample-5s.mp4\"\n\n",
          "display_code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\nvideo_url = \"https://download.samplelib.com/mp4/sample-5s.mp4\"\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 12,
          "line_range": [
            12,
            15
          ]
        },
        {
          "code": "# Download the video file.\n# Read the video file as bytes for inline upload.\n",
          "display_code": "",
          "annotation": "Download the video file.\nRead the video file as bytes for inline upload.",
          "is_comment": true,
          "start_line": 16,
          "line_range": [
            16,
            17
          ],
          "target_line_range": [
            18,
            20
          ]
        },
        {
          "code": "response = requests.get(video_url)\nvideo_bytes = response.content\n\n",
          "display_code": "response = requests.get(video_url)\nvideo_bytes = response.content\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 18,
          "line_range": [
            18,
            20
          ]
        },
        {
          "code": "# Create a Gemini request with the video and a question\n",
          "display_code": "",
          "annotation": "Create a Gemini request with the video and a question",
          "is_comment": true,
          "start_line": 21,
          "line_range": [
            21,
            21
          ],
          "target_line_range": [
            22,
            31
          ]
        },
        {
          "code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=types.Content(\n        parts=[\n            types.Part(text=\"Describe the tone and genre of this video.\"),\n            types.Part(inline_data=types.Blob(data=video_bytes, mime_type=\"video/mp4\")),\n        ]\n    ),\n)\n\n",
          "display_code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=types.Content(\n        parts=[\n            types.Part(text=\"Describe the tone and genre of this video.\"),\n            types.Part(inline_data=types.Blob(data=video_bytes, mime_type=\"video/mp4\")),\n        ]\n    ),\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 22,
          "line_range": [
            22,
            31
          ]
        },
        {
          "code": "# Print the model's response\n",
          "display_code": "",
          "annotation": "Print the model's response",
          "is_comment": true,
          "start_line": 32,
          "line_range": [
            32,
            32
          ],
          "target_line_range": [
            33,
            33
          ]
        },
        {
          "code": "print(response.text)\n",
          "display_code": "print(response.text)\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 33,
          "line_range": [
            33,
            33
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library",
          "command": "pip install google-generative-ai",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python video_question_answering.py",
          "output": "Certainly! Here's a description of the tone and genre of the video clip:"
        }
      ],
      "image_data": [],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/vision?lang=python#prompting-video"
      ],
      "section_id": "004-basic-video",
      "section_title": "Video basics"
    },
    {
      "id": "013-video-summarization",
      "title": "Video summarization",
      "description": "This example demonstrates how to summarize the content of a video using the Gemini API.\nNote: For videos larger than 20MB, you must use the File API for uploading.",
      "order": 13,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 4,
          "line_range": [
            4,
            4
          ]
        },
        {
          "code": "# Import the Gemini API\n",
          "display_code": "",
          "annotation": "Import the Gemini API",
          "is_comment": true,
          "start_line": 5,
          "line_range": [
            5,
            5
          ],
          "target_line_range": [
            6,
            10
          ]
        },
        {
          "code": "from google import genai\nfrom google.genai import types\nimport os\nimport requests\n\n",
          "display_code": "from google import genai\nfrom google.genai import types\nimport os\nimport requests\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 6,
          "line_range": [
            6,
            10
          ]
        },
        {
          "code": "# Initialize the Gemini client with your API key\n",
          "display_code": "",
          "annotation": "Initialize the Gemini client with your API key",
          "is_comment": true,
          "start_line": 11,
          "line_range": [
            11,
            11
          ],
          "target_line_range": [
            12,
            15
          ]
        },
        {
          "code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\nvideo_url = \"https://download.samplelib.com/mp4/sample-5s.mp4\"\n\n",
          "display_code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\nvideo_url = \"https://download.samplelib.com/mp4/sample-5s.mp4\"\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 12,
          "line_range": [
            12,
            15
          ]
        },
        {
          "code": "# Download the video file.\n# Read the video file as bytes for inline upload.\n",
          "display_code": "",
          "annotation": "Download the video file.\nRead the video file as bytes for inline upload.",
          "is_comment": true,
          "start_line": 16,
          "line_range": [
            16,
            17
          ],
          "target_line_range": [
            18,
            20
          ]
        },
        {
          "code": "response = requests.get(video_url)\nvideo_bytes = response.content\n\n",
          "display_code": "response = requests.get(video_url)\nvideo_bytes = response.content\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 18,
          "line_range": [
            18,
            20
          ]
        },
        {
          "code": "# Create a Gemini request with the video and a question\n",
          "display_code": "",
          "annotation": "Create a Gemini request with the video and a question",
          "is_comment": true,
          "start_line": 21,
          "line_range": [
            21,
            21
          ],
          "target_line_range": [
            22,
            31
          ]
        },
        {
          "code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=types.Content(\n        parts=[\n            types.Part(text=\"Summarize the content of this video.\"),\n            types.Part(inline_data=types.Blob(data=video_bytes, mime_type=\"video/mp4\")),\n        ]\n    ),\n)\n\n",
          "display_code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=types.Content(\n        parts=[\n            types.Part(text=\"Summarize the content of this video.\"),\n            types.Part(inline_data=types.Blob(data=video_bytes, mime_type=\"video/mp4\")),\n        ]\n    ),\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 22,
          "line_range": [
            22,
            31
          ]
        },
        {
          "code": "# Print the model's response\n",
          "display_code": "",
          "annotation": "Print the model's response",
          "is_comment": true,
          "start_line": 32,
          "line_range": [
            32,
            32
          ],
          "target_line_range": [
            33,
            33
          ]
        },
        {
          "code": "print(response.text)\n",
          "display_code": "print(response.text)\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 33,
          "line_range": [
            33,
            33
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library",
          "command": "pip install google-generative-ai",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python video_summarization.py",
          "output": "The video shows a park with trees next to a busy street with cars and buses passing by. The sun shines through the leaves of the trees."
        }
      ],
      "image_data": [],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/vision?lang=python#prompting-video"
      ],
      "section_id": "004-basic-video",
      "section_title": "Video basics"
    },
    {
      "id": "014-video-transcription",
      "title": "Video transcription",
      "description": "This example demonstrates how to transcribe the content of a video using the Gemini API.\nNote: For videos larger than 20MB, you must use the File API for uploading.",
      "order": 14,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 4,
          "line_range": [
            4,
            4
          ]
        },
        {
          "code": "# Import the Gemini API\n",
          "display_code": "",
          "annotation": "Import the Gemini API",
          "is_comment": true,
          "start_line": 5,
          "line_range": [
            5,
            5
          ],
          "target_line_range": [
            6,
            10
          ]
        },
        {
          "code": "from google import genai\nfrom google.genai import types\nimport os\nimport requests\n\n",
          "display_code": "from google import genai\nfrom google.genai import types\nimport os\nimport requests\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 6,
          "line_range": [
            6,
            10
          ]
        },
        {
          "code": "# Initialize the Gemini client with your API key\n",
          "display_code": "",
          "annotation": "Initialize the Gemini client with your API key",
          "is_comment": true,
          "start_line": 11,
          "line_range": [
            11,
            11
          ],
          "target_line_range": [
            12,
            15
          ]
        },
        {
          "code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\nvideo_url = \"https://download.samplelib.com/mp4/sample-5s.mp4\"\n\n",
          "display_code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\nvideo_url = \"https://download.samplelib.com/mp4/sample-5s.mp4\"\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 12,
          "line_range": [
            12,
            15
          ]
        },
        {
          "code": "# Download the video file.\n# Read the video file as bytes for inline upload.\n",
          "display_code": "",
          "annotation": "Download the video file.\nRead the video file as bytes for inline upload.",
          "is_comment": true,
          "start_line": 16,
          "line_range": [
            16,
            17
          ],
          "target_line_range": [
            18,
            20
          ]
        },
        {
          "code": "response = requests.get(video_url)\nvideo_bytes = response.content\n\n",
          "display_code": "response = requests.get(video_url)\nvideo_bytes = response.content\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 18,
          "line_range": [
            18,
            20
          ]
        },
        {
          "code": "# Define our prompt\n",
          "display_code": "",
          "annotation": "Define our prompt",
          "is_comment": true,
          "start_line": 21,
          "line_range": [
            21,
            21
          ],
          "target_line_range": [
            22,
            26
          ]
        },
        {
          "code": "prompt = (\n    \"Transcribe the audio from this video, giving timestamps for \"\n    \"salient events in the video. Also provide visual descriptions.\"\n)\n\n",
          "display_code": "prompt = (\n    \"Transcribe the audio from this video, giving timestamps for \"\n    \"salient events in the video. Also provide visual descriptions.\"\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 22,
          "line_range": [
            22,
            26
          ]
        },
        {
          "code": "# Create a Gemini request with the video and our prompt.\n",
          "display_code": "",
          "annotation": "Create a Gemini request with the video and our prompt.",
          "is_comment": true,
          "start_line": 27,
          "line_range": [
            27,
            27
          ],
          "target_line_range": [
            28,
            37
          ]
        },
        {
          "code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=types.Content(\n        parts=[\n            types.Part(text=prompt),\n            types.Part(inline_data=types.Blob(data=video_bytes, mime_type=\"video/mp4\")),\n        ]\n    ),\n)\n\n",
          "display_code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=types.Content(\n        parts=[\n            types.Part(text=prompt),\n            types.Part(inline_data=types.Blob(data=video_bytes, mime_type=\"video/mp4\")),\n        ]\n    ),\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 28,
          "line_range": [
            28,
            37
          ]
        },
        {
          "code": "# Print the model's response\n",
          "display_code": "",
          "annotation": "Print the model's response",
          "is_comment": true,
          "start_line": 38,
          "line_range": [
            38,
            38
          ],
          "target_line_range": [
            39,
            39
          ]
        },
        {
          "code": "print(response.text)\n",
          "display_code": "print(response.text)\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 39,
          "line_range": [
            39,
            39
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library",
          "command": "pip install google-generative-ai",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python video_transcription.py",
          "output": "Okay, here's the transcription and visual descriptions of the video:"
        }
      ],
      "image_data": [],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/vision?lang=python#prompting-video"
      ],
      "section_id": "004-basic-video",
      "section_title": "Video basics"
    },
    {
      "id": "015-youtube-video-summarization",
      "title": "YouTube video summarization",
      "description": "This example demonstrates how to summarize a YouTube video using its URL.",
      "order": 15,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 3,
          "line_range": [
            3,
            3
          ]
        },
        {
          "code": "# Import the Gemini API\n",
          "display_code": "",
          "annotation": "Import the Gemini API",
          "is_comment": true,
          "start_line": 4,
          "line_range": [
            4,
            4
          ],
          "target_line_range": [
            5,
            6
          ]
        },
        {
          "code": "from google import genai\n\n",
          "display_code": "from google import genai\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 5,
          "line_range": [
            5,
            6
          ]
        },
        {
          "code": "# Initialize the Gemini client with your API key\n",
          "display_code": "",
          "annotation": "Initialize the Gemini client with your API key",
          "is_comment": true,
          "start_line": 7,
          "line_range": [
            7,
            7
          ],
          "target_line_range": [
            8,
            9
          ]
        },
        {
          "code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\n",
          "display_code": "client = genai.Client(api_key=\"YOUR_API_KEY\")\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 8,
          "line_range": [
            8,
            9
          ]
        },
        {
          "code": "# Construct the prompt with the YouTube video URL\n",
          "display_code": "",
          "annotation": "Construct the prompt with the YouTube video URL",
          "is_comment": true,
          "start_line": 10,
          "line_range": [
            10,
            10
          ],
          "target_line_range": [
            11,
            13
          ]
        },
        {
          "code": "youtube_url = \"https://www.youtube.com/watch?v=tAP1eZYEuKA\"\nprompt = f\"Summarize the content of this YouTube video: {youtube_url}\"\n\n",
          "display_code": "youtube_url = \"https://www.youtube.com/watch?v=tAP1eZYEuKA\"\nprompt = f\"Summarize the content of this YouTube video: {youtube_url}\"\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 11,
          "line_range": [
            11,
            13
          ]
        },
        {
          "code": "# Call the API to generate content\n",
          "display_code": "",
          "annotation": "Call the API to generate content",
          "is_comment": true,
          "start_line": 14,
          "line_range": [
            14,
            14
          ],
          "target_line_range": [
            15,
            26
          ]
        },
        {
          "code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\n        {\n            \"parts\": [\n                {\"text\": \"Can you summarize this video?\"},\n                {\"file_data\": {\"file_uri\": youtube_url}},\n            ]\n        }\n    ],\n)\n\n",
          "display_code": "response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\n        {\n            \"parts\": [\n                {\"text\": \"Can you summarize this video?\"},\n                {\"file_data\": {\"file_uri\": youtube_url}},\n            ]\n        }\n    ],\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 15,
          "line_range": [
            15,
            26
          ]
        },
        {
          "code": "# Print the generated summary\n",
          "display_code": "",
          "annotation": "Print the generated summary",
          "is_comment": true,
          "start_line": 27,
          "line_range": [
            27,
            27
          ],
          "target_line_range": [
            28,
            28
          ]
        },
        {
          "code": "print(response.text)\n",
          "display_code": "print(response.text)\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 28,
          "line_range": [
            28,
            28
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library",
          "command": "pip install google-generative-ai",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python youtube-summarization.py",
          "output": "Sure, here is a summary of the video!"
        }
      ],
      "image_data": [],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/vision?lang=python#youtube"
      ],
      "section_id": "004-basic-video",
      "section_title": "Video basics"
    },
    {
      "id": "016-pdf-csv-analysis",
      "title": "PDF and CSV data analysis and summarization",
      "description": "This example demonstrates how to use the Gemini API to analyze data from PDF and CSV files.",
      "order": 16,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 3,
          "line_range": [
            3,
            3
          ]
        },
        {
          "code": "# Import necessary libraries\n",
          "display_code": "",
          "annotation": "Import necessary libraries",
          "is_comment": true,
          "start_line": 4,
          "line_range": [
            4,
            4
          ],
          "target_line_range": [
            5,
            9
          ]
        },
        {
          "code": "from google import genai\nfrom google.genai import types\nimport httpx\nimport os\n\n",
          "display_code": "from google import genai\nfrom google.genai import types\nimport httpx\nimport os\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 5,
          "line_range": [
            5,
            9
          ]
        },
        {
          "code": "# Initialize the Gemini client with your API key\n",
          "display_code": "",
          "annotation": "Initialize the Gemini client with your API key",
          "is_comment": true,
          "start_line": 10,
          "line_range": [
            10,
            10
          ],
          "target_line_range": [
            11,
            12
          ]
        },
        {
          "code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\n",
          "display_code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 11,
          "line_range": [
            11,
            12
          ]
        },
        {
          "code": "# We start with the PDF analysis.\n# Download the PDF file\n",
          "display_code": "",
          "annotation": "We start with the PDF analysis.\nDownload the PDF file",
          "is_comment": true,
          "start_line": 13,
          "line_range": [
            13,
            14
          ],
          "target_line_range": [
            15,
            17
          ]
        },
        {
          "code": "pdf_url = \"https://www.princexml.com/samples/invoice/invoicesample.pdf\"\npdf_data = httpx.get(pdf_url).content\n\n",
          "display_code": "pdf_url = \"https://www.princexml.com/samples/invoice/invoicesample.pdf\"\npdf_data = httpx.get(pdf_url).content\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 15,
          "line_range": [
            15,
            17
          ]
        },
        {
          "code": "# Prompt to extract main players from the PDF\n",
          "display_code": "",
          "annotation": "Prompt to extract main players from the PDF",
          "is_comment": true,
          "start_line": 18,
          "line_range": [
            18,
            18
          ],
          "target_line_range": [
            19,
            23
          ]
        },
        {
          "code": "pdf_prompt = (\n    \"Identify the main companies or entities mentioned in this invoice. \"\n    \"Summarize the data.\"\n)\n\n",
          "display_code": "pdf_prompt = (\n    \"Identify the main companies or entities mentioned in this invoice. \"\n    \"Summarize the data.\"\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 19,
          "line_range": [
            19,
            23
          ]
        },
        {
          "code": "# Generate content with the PDF and the prompt\n",
          "display_code": "",
          "annotation": "Generate content with the PDF and the prompt",
          "is_comment": true,
          "start_line": 24,
          "line_range": [
            24,
            24
          ],
          "target_line_range": [
            25,
            32
          ]
        },
        {
          "code": "pdf_response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\n        types.Part.from_bytes(data=pdf_data, mime_type=\"application/pdf\"),\n        pdf_prompt,\n    ],\n)\n\n",
          "display_code": "pdf_response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\n        types.Part.from_bytes(data=pdf_data, mime_type=\"application/pdf\"),\n        pdf_prompt,\n    ],\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 25,
          "line_range": [
            25,
            32
          ]
        },
        {
          "code": "# Print the PDF analysis result\n",
          "display_code": "",
          "annotation": "Print the PDF analysis result",
          "is_comment": true,
          "start_line": 33,
          "line_range": [
            33,
            33
          ],
          "target_line_range": [
            34,
            35
          ]
        },
        {
          "code": "print(\"PDF Analysis Result:\\n\", pdf_response.text)\n\n",
          "display_code": "print(\"PDF Analysis Result:\\n\", pdf_response.text)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 34,
          "line_range": [
            34,
            35
          ]
        },
        {
          "code": "# Moving on to the CSV analysis now. You'll note that the process is very\n# similar.\n# You can also pass in code files, XML, RTF, Markdown, and more.\n# We download the CSV file here.\n",
          "display_code": "",
          "annotation": "Moving on to the CSV analysis now. You'll note that the process is very\nsimilar.\nYou can also pass in code files, XML, RTF, Markdown, and more.\nWe download the CSV file here.",
          "is_comment": true,
          "start_line": 36,
          "line_range": [
            36,
            39
          ],
          "target_line_range": [
            40,
            42
          ]
        },
        {
          "code": "csv_url = \"https://gist.githubusercontent.com/suellenstringer-hye/f2231b3383538bcb1a5b051c7908f5b7/raw/0f4e0733a434733cda8e749bbbf33a93c2b5bbde/test.csv\"\ncsv_data = httpx.get(csv_url).content\n\n",
          "display_code": "csv_url = \"https://gist.githubusercontent.com/suellenstringer-hye/f2231b3383538bcb1a5b051c7908f5b7/raw/0f4e0733a434733cda8e749bbbf33a93c2b5bbde/test.csv\"\ncsv_data = httpx.get(csv_url).content\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 40,
          "line_range": [
            40,
            42
          ]
        },
        {
          "code": "# Prompt to analyze the CSV data\n",
          "display_code": "",
          "annotation": "Prompt to analyze the CSV data",
          "is_comment": true,
          "start_line": 43,
          "line_range": [
            43,
            43
          ],
          "target_line_range": [
            44,
            45
          ]
        },
        {
          "code": "csv_prompt = \"Analyze this data and tell me about the contents. Summarize the data.\"\n\n",
          "display_code": "csv_prompt = \"Analyze this data and tell me about the contents. Summarize the data.\"\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 44,
          "line_range": [
            44,
            45
          ]
        },
        {
          "code": "# Generate content with the CSV data and the prompt\n",
          "display_code": "",
          "annotation": "Generate content with the CSV data and the prompt",
          "is_comment": true,
          "start_line": 46,
          "line_range": [
            46,
            46
          ],
          "target_line_range": [
            47,
            57
          ]
        },
        {
          "code": "csv_response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\n        types.Part.from_bytes(\n            data=csv_data,\n            mime_type=\"text/csv\",\n        ),\n        csv_prompt,\n    ],\n)\n\n",
          "display_code": "csv_response = client.models.generate_content(\n    model=\"gemini-2.0-flash\",\n    contents=[\n        types.Part.from_bytes(\n            data=csv_data,\n            mime_type=\"text/csv\",\n        ),\n        csv_prompt,\n    ],\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 47,
          "line_range": [
            47,
            57
          ]
        },
        {
          "code": "# Print the CSV analysis result\n",
          "display_code": "",
          "annotation": "Print the CSV analysis result",
          "is_comment": true,
          "start_line": 58,
          "line_range": [
            58,
            58
          ],
          "target_line_range": [
            59,
            59
          ]
        },
        {
          "code": "print(\"\\nCSV Analysis Result:\\n\", csv_response.text)\n",
          "display_code": "print(\"\\nCSV Analysis Result:\\n\", csv_response.text)\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 59,
          "line_range": [
            59,
            59
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library and httpx (for downloading files)",
          "command": "pip install google-generative-ai httpx pandas",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python pdf_csv_analysis.py",
          "output": "PDF Analysis Result:\n The main company mentioned in the invoice is Sunny Farm."
        }
      ],
      "image_data": [],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/document-processing?lang=python",
        "https://ai.google.dev/gemini-api/docs/document-processing?lang=rest"
      ],
      "section_id": "005-other-data-types",
      "section_title": "PDFs and other data types"
    },
    {
      "id": "017-content-translation",
      "title": "Translate documents",
      "description": "This example demonstrates how to load content from a URL and translate it into\nChinese using the Gemini API.\nIt's easy to do the same using PDF or Markdown files, though you might want to\nsplit it up into smaller chunks for better accuracy if your document is long.",
      "order": 17,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 6,
          "line_range": [
            6,
            6
          ]
        },
        {
          "code": "# Import the necessary libraries\n",
          "display_code": "",
          "annotation": "Import the necessary libraries",
          "is_comment": true,
          "start_line": 7,
          "line_range": [
            7,
            7
          ],
          "target_line_range": [
            8,
            11
          ]
        },
        {
          "code": "from google import genai\nimport requests\nimport os\n\n",
          "display_code": "from google import genai\nimport requests\nimport os\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 8,
          "line_range": [
            8,
            11
          ]
        },
        {
          "code": "# Initialize the Gemini client with your API key\n",
          "display_code": "",
          "annotation": "Initialize the Gemini client with your API key",
          "is_comment": true,
          "start_line": 12,
          "line_range": [
            12,
            12
          ],
          "target_line_range": [
            13,
            14
          ]
        },
        {
          "code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\n",
          "display_code": "client = genai.Client(api_key=os.getenv(\"GEMINI_API_KEY\"))\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 13,
          "line_range": [
            13,
            14
          ]
        },
        {
          "code": "# Define the URL of the content to be translated\n",
          "display_code": "",
          "annotation": "Define the URL of the content to be translated",
          "is_comment": true,
          "start_line": 15,
          "line_range": [
            15,
            15
          ],
          "target_line_range": [
            16,
            17
          ]
        },
        {
          "code": "url = \"https://raw.githubusercontent.com/zenml-io/zenml/refs/heads/main/README.md\"\n\n",
          "display_code": "url = \"https://raw.githubusercontent.com/zenml-io/zenml/refs/heads/main/README.md\"\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 16,
          "line_range": [
            16,
            17
          ]
        },
        {
          "code": "# Fetch the content from the URL\n",
          "display_code": "",
          "annotation": "Fetch the content from the URL",
          "is_comment": true,
          "start_line": 18,
          "line_range": [
            18,
            18
          ],
          "target_line_range": [
            19,
            21
          ]
        },
        {
          "code": "response = requests.get(url)\ntext_content = response.text\n\n",
          "display_code": "response = requests.get(url)\ntext_content = response.text\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 19,
          "line_range": [
            19,
            21
          ]
        },
        {
          "code": "# Define the prompt for translation\n",
          "display_code": "",
          "annotation": "Define the prompt for translation",
          "is_comment": true,
          "start_line": 22,
          "line_range": [
            22,
            22
          ],
          "target_line_range": [
            23,
            24
          ]
        },
        {
          "code": "prompt = f\"Translate the following English text to Chinese: {text_content}\"\n\n",
          "display_code": "prompt = f\"Translate the following English text to Chinese: {text_content}\"\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 23,
          "line_range": [
            23,
            24
          ]
        },
        {
          "code": "# Generate the translated content using the Gemini API.\n# We're using the 2.0-flash-lite model here for speed, but you probably would\n# want to use a more powerful model for better results.\n",
          "display_code": "",
          "annotation": "Generate the translated content using the Gemini API.\nWe're using the 2.0-flash-lite model here for speed, but you probably would\nwant to use a more powerful model for better results.",
          "is_comment": true,
          "start_line": 25,
          "line_range": [
            25,
            27
          ],
          "target_line_range": [
            28,
            32
          ]
        },
        {
          "code": "model = client.models.generate_content(\n    model=\"gemini-2.0-flash-lite\",\n    contents=prompt,\n)\n\n",
          "display_code": "model = client.models.generate_content(\n    model=\"gemini-2.0-flash-lite\",\n    contents=prompt,\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 28,
          "line_range": [
            28,
            32
          ]
        },
        {
          "code": "# Print the translated text\n",
          "display_code": "",
          "annotation": "Print the translated text",
          "is_comment": true,
          "start_line": 33,
          "line_range": [
            33,
            33
          ],
          "target_line_range": [
            34,
            34
          ]
        },
        {
          "code": "print(model.text)\n",
          "display_code": "print(model.text)\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 34,
          "line_range": [
            34,
            34
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "First, install the Google Generative AI library and requests",
          "command": "pip install google-generative-ai requests",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python translate.py",
          "output": "```chinese\n<div align=\"center\">\n  <img referrerpolicy=\"no-referrer-when-downgrade\" src=\"https://static.scarf.sh/a.png?x-pxid=0fcbab94-8fbe-4a38-93e8-c2348450a42e\" />\n  <h1 align=\"center\">\u8d85\u8d8a\u6f14\u793a\uff1a\u751f\u4ea7\u7ea7 AI \u7cfb\u7edf</h1>\n  <h3 align=\"center\">ZenML \u5c06\u7ecf\u8fc7\u5b9e\u6218\u68c0\u9a8c\u7684 MLOps \u5b9e\u8df5\u5e26\u5165\u60a8\u7684 AI \u5e94\u7528\uff0c\u5904\u7406\u5927\u89c4\u6a21\u7684\u8bc4\u4f30\u3001\u76d1\u63a7\u548c\u90e8\u7f72</h3>\n</div>"
        }
      ],
      "image_data": [],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/document-processing?lang=python",
        "https://ai.google.dev/gemini-api/docs/document-processing?lang=rest"
      ],
      "section_id": "005-other-data-types",
      "section_title": "PDFs and other data types"
    },
    {
      "id": "018-structured-data-extraction",
      "title": "Extract structured data from a PDF invoice",
      "description": "This example demonstrates how to extract structured data from a PDF invoice using the Gemini API and Pydantic.",
      "order": 18,
      "code_segments": [
        {
          "code": "\n",
          "display_code": "\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 3,
          "line_range": [
            3,
            3
          ]
        },
        {
          "code": "# Import necessary libraries\n",
          "display_code": "",
          "annotation": "Import necessary libraries",
          "is_comment": true,
          "start_line": 4,
          "line_range": [
            4,
            4
          ],
          "target_line_range": [
            5,
            11
          ]
        },
        {
          "code": "import os\nimport requests\nimport json\nfrom pydantic import BaseModel\nfrom typing import List\nfrom google import genai\n\n",
          "display_code": "import os\nimport requests\nimport json\nfrom pydantic import BaseModel\nfrom typing import List\nfrom google import genai\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 5,
          "line_range": [
            5,
            11
          ]
        },
        {
          "code": "# Define Pydantic models for structured data\n",
          "display_code": "",
          "annotation": "Define Pydantic models for structured data",
          "is_comment": true,
          "start_line": 12,
          "line_range": [
            12,
            12
          ],
          "target_line_range": [
            13,
            27
          ]
        },
        {
          "code": "class Item(BaseModel):\n    name: str\n    price_per_kg: float\n    quantity_kg: float\n\n\nclass InvoiceContents(BaseModel):\n    sender: str\n    recipient: str\n    address: str\n    full_total: float\n    subtotal: float\n    GST: float\n    items: List[Item]\n\n",
          "display_code": "class Item(BaseModel):\n    name: str\n    price_per_kg: float\n    quantity_kg: float\n\n\nclass InvoiceContents(BaseModel):\n    sender: str\n    recipient: str\n    address: str\n    full_total: float\n    subtotal: float\n    GST: float\n    items: List[Item]\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 13,
          "line_range": [
            13,
            27
          ]
        },
        {
          "code": "# Load the PDF invoice from a URL\n# For PDFs larger than 20MB, use the Files API for uploading\n",
          "display_code": "",
          "annotation": "Load the PDF invoice from a URL\nFor PDFs larger than 20MB, use the Files API for uploading",
          "is_comment": true,
          "start_line": 28,
          "line_range": [
            28,
            29
          ],
          "target_line_range": [
            30,
            34
          ]
        },
        {
          "code": "pdf_url = \"https://www.princexml.com/samples/invoice/invoicesample.pdf\"\nresponse = requests.get(pdf_url)\nresponse.raise_for_status()  # Ensure the download was successful\npdf_data = response.content\n\n",
          "display_code": "pdf_url = \"https://www.princexml.com/samples/invoice/invoicesample.pdf\"\nresponse = requests.get(pdf_url)\nresponse.raise_for_status()  # Ensure the download was successful\npdf_data = response.content\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 30,
          "line_range": [
            30,
            34
          ]
        },
        {
          "code": "# Initialize the Gemini client with your API key\n",
          "display_code": "",
          "annotation": "Initialize the Gemini client with your API key",
          "is_comment": true,
          "start_line": 35,
          "line_range": [
            35,
            35
          ],
          "target_line_range": [
            36,
            37
          ]
        },
        {
          "code": "client = genai.Client(api_key=os.environ.get(\"GEMINI_API_KEY\", \"YOUR_API_KEY\"))\n\n",
          "display_code": "client = genai.Client(api_key=os.environ.get(\"GEMINI_API_KEY\", \"YOUR_API_KEY\"))\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 36,
          "line_range": [
            36,
            37
          ]
        },
        {
          "code": "# Configure the model for structured output\n",
          "display_code": "",
          "annotation": "Configure the model for structured output",
          "is_comment": true,
          "start_line": 38,
          "line_range": [
            38,
            38
          ],
          "target_line_range": [
            39,
            40
          ]
        },
        {
          "code": "model = 'gemini-2.5-pro-preview-03-25'\n\n",
          "display_code": "model = 'gemini-2.5-pro-preview-03-25'\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 39,
          "line_range": [
            39,
            40
          ]
        },
        {
          "code": "# Construct the prompt with instructions and schema information\n",
          "display_code": "",
          "annotation": "Construct the prompt with instructions and schema information",
          "is_comment": true,
          "start_line": 41,
          "line_range": [
            41,
            41
          ],
          "target_line_range": [
            42,
            43
          ]
        },
        {
          "code": "prompt_text = f\"\"\"Extract the following information from the invoice: sender, recipient, address, full_total, subtotal, GST, and a list of items (name, price/kg, quantity (kg)).\"\n\n",
          "display_code": "prompt_text = f\"\"\"Extract the following information from the invoice: sender, recipient, address, full_total, subtotal, GST, and a list of items (name, price/kg, quantity (kg)).\"\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 42,
          "line_range": [
            42,
            43
          ]
        },
        {
          "code": "# Call the Gemini API to extract structured data from the PDF\n",
          "display_code": "",
          "annotation": "Call the Gemini API to extract structured data from the PDF",
          "is_comment": true,
          "start_line": 44,
          "line_range": [
            44,
            44
          ],
          "target_line_range": [
            45,
            50
          ]
        },
        {
          "code": "response = client.generate_content(\n    model=model,\n    contents=[pdf_data, prompt_text],\n    generation_config=genai.GenerationConfig(temperature=0.0),\n)\n\n",
          "display_code": "response = client.generate_content(\n    model=model,\n    contents=[pdf_data, prompt_text],\n    generation_config=genai.GenerationConfig(temperature=0.0),\n)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 45,
          "line_range": [
            45,
            50
          ]
        },
        {
          "code": "# Parse the JSON response into the Pydantic model\n# Assuming the model returns a JSON string representation of the InvoiceContents\n",
          "display_code": "",
          "annotation": "Parse the JSON response into the Pydantic model\nAssuming the model returns a JSON string representation of the InvoiceContents",
          "is_comment": true,
          "start_line": 51,
          "line_range": [
            51,
            52
          ],
          "target_line_range": [
            53,
            55
          ]
        },
        {
          "code": "invoice_data = json.loads(response.text)\ninvoice = InvoiceContents(**invoice_data)\n\n",
          "display_code": "invoice_data = json.loads(response.text)\ninvoice = InvoiceContents(**invoice_data)\n\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 53,
          "line_range": [
            53,
            55
          ]
        },
        {
          "code": "# Print the extracted data as a JSON string\n",
          "display_code": "",
          "annotation": "Print the extracted data as a JSON string",
          "is_comment": true,
          "start_line": 56,
          "line_range": [
            56,
            56
          ],
          "target_line_range": [
            57,
            57
          ]
        },
        {
          "code": "print(invoice.model_dump_json(indent=2))\n",
          "display_code": "print(invoice.model_dump_json(indent=2))\n",
          "annotation": "",
          "is_comment": false,
          "start_line": 57,
          "line_range": [
            57,
            57
          ]
        }
      ],
      "shell_segments": [
        {
          "explanation": "Install the Google Generative AI library and Pydantic",
          "command": "pip install google-generative-ai pydantic requests",
          "output": ""
        },
        {
          "explanation": "Then run the program with Python",
          "command": "python structured-data-extraction.py",
          "output": "{\n  \"sender\": \"SUNNY FARM\",\n  \"recipient\": \"Denny Gunawan\",\n  \"address\": \"221 Queen St\\nMelbourne VIC 3000\",\n  \"full_total\": \"$39.60\",\n  \"subtotal\": \"$36.00\",\n  \"gst_value\": \"$3.60\",\n  \"items\": [\n    {\n      \"name\": \"Apple\",\n      \"price_per_kg\": \"$5.00\",\n      \"quantity_kg\": 1\n    },\n    {\n      \"name\": \"Orange\",\n      \"price_per_kg\": \"$1.99\",\n      \"quantity_kg\": 2\n    },\n    {\n      \"name\": \"Watermelon\",\n      \"price_per_kg\": \"$1.69\",\n      \"quantity_kg\": 3\n    },\n    {\n      \"name\": \"Mango\",\n      \"price_per_kg\": \"$9.56\",\n      \"quantity_kg\": 2\n    },\n    {\n      \"name\": \"Peach\",\n      \"price_per_kg\": \"$2.99\",\n      \"quantity_kg\": 1\n    }\n  ]\n}"
        }
      ],
      "image_data": [],
      "documentation_links": [
        "https://ai.google.dev/gemini-api/docs/document-processing",
        "https://ai.google.dev/gemini-api/docs/structured-output?lang=python"
      ],
      "section_id": "005-other-data-types",
      "section_title": "PDFs and other data types"
    }
  ],
  "sections": [
    {
      "id": "001-basic-text",
      "title": "Text basics",
      "description": "",
      "order": 1,
      "examples": [
        "001-basic-generation",
        "002-streaming-text",
        "003-system-prompt"
      ]
    },
    {
      "id": "002-basic-images",
      "title": "Images basics",
      "description": "",
      "order": 2,
      "examples": [
        "004-image-q-a",
        "005-image-generation",
        "006-editing-images",
        "007-bounding-boxes",
        "008-image-segmentation"
      ]
    },
    {
      "id": "003-basic-audio",
      "title": "Audio basics",
      "description": "",
      "order": 3,
      "examples": [
        "009-audio-q-a",
        "010-audio-transcription",
        "011-audio-summarization"
      ]
    },
    {
      "id": "004-basic-video",
      "title": "Video basics",
      "description": "",
      "order": 4,
      "examples": [
        "012-video-q-a",
        "013-video-summarization",
        "014-video-transcription",
        "015-youtube-video-summarization"
      ]
    },
    {
      "id": "005-other-data-types",
      "title": "PDFs and other data types",
      "description": "",
      "order": 5,
      "examples": [
        "016-pdf-csv-analysis",
        "017-content-translation",
        "018-structured-data-extraction"
      ]
    }
  ]
}